<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link rel="stylesheet" href="/css/style.css">
	<style>
		li {
			width: 20%;
			background: red;
			text-align: center;
			margin: 8px;
		}

		a {
			background: yellow;
			color: #000;
			display: inline-block;
			padding: 20px;
		}
	</style>
</head>

<body>

	<ul class='list-box'>
		<li><a href="#">1aa</a></li>
		<li><a href="#">2bb</a></li>
		<li><a href="#">3cc</a></li>
		<li><a href="#">4dd</a></li>
		<li><a href="#">5ee</a></li>
		<li><a href="#">6ss</a></li>
		<li><a href="#">7aa</a></li>
		<li><a href="#">8rr</a></li>
	</ul>

	<p class="delete-text">지워졌습니다.</p>
	<script src="/devState.js"></script>
	<script src="/function_basic.js"></script>
	<script>
		//쿼리셀렉터
		let qs = (qsValue) => {
			let that = document.querySelectorAll(qsValue);
			let res;
			that.length == 1 ?
				res = document.querySelector(qsValue) :
				res = that;
			return res
		};

		//엘리면트 생성
		let createEl = (elValue) => {
			res = document.createElement(elValue);
			return res;
		}

		//루프 돌릴때 사용
		const looper = (el, f) => {
			for (let i = 0; i < el.length; i++) {
				f(el[i])
			};
		};
		// 에드클레스
		const addClass = (el) => {
			el.classList.add('on');
		};
		// 리무브클레스
		const removeClass = (el) => {
			el.classList.remove('on');
		};

		//동일 형제들의 on 제거 후 on 토글
		const cleanToggleClass = (el) => {
			log(el);
			if (el.parentElement) {
				parentEl = el.parentElement;
				looper(parentEl.children, removeClass)
			}
			el.classList.toggle('on');
		};
		//on 토글
		const toggleClass = (el) => {
			el.classList.toggle('on');
		};


		const list = qs('li');
		const listt = document.querySelector('li');

		//event.delegation
		//list-box라는 클레스를 가진 ul,ol 등의 리스트 box를 찾아서 반환
		const listBoxFinder = (el, f) => {
			let identiti = null;
			let parent = el.parentElement;
			if (1 < el.length) {
				identiti = el[0].tagName; //인접한 형제가 있으므로 태그네임이 구분자
				parent = el[0].parentElement; //부모요소를 따둠, 앞으로 바뀔 예정
			}
			while (!parent.classList.contains('list-box')) {
				console.log(' 와일문동작');
				parent = parent.parentElement;
				log('부모요소를 나타내는 클레스인 list-box 클레스를 가지고 있지 않아요. 적절한 곳에 list-box클레스를 넣어주세요.');
				if (parent.tagName == 'BODY') {
					log('부모요소를 찾는데 BODY까지 도달함, 확인필요');
					return;
				};
				log(parent);
				if (f) {

				}
			};
			return parent;
		};


		const targetOnly = (el, event) => {
			let t = event.target;
			log(el[0])
			log(t)
			let elTagName;
			//테그네임과 클레스명이 모두 같을 때
			//클레스명만 같을 때
			el.length == 1 ?
				elTagName = el.tagName :
				elTagName = el[0].tagName;

			if (elTagName == t.tagName) {
				log('서로의 테그네임이 동일합니다.')
				return t
			}
			while (!(elTagName == t.tagName)) {
				log('왈문동작')
				t = t.parentElement;
				console.log(t)
			}
			return t;
		}

		const addEvent = (el, eventName, f) => {
			let eventDelegation = listBoxFinder(el);
			log(eventDelegation)
			eventDelegation.addEventListener(eventName, (event) => {
				f(targetOnly(el, event));
			});
		}

		addEvent(list, 'click', cleanToggleClass)
		//클릭하면 해당 클레스에 addclass;


		// const clickedIndexElementAddClass =
		//클릭한 ul
	</script>
</body>

</html>